{#- Copyright 2011 META IT & Olivier Cort√®s <oc@meta-it.fr>
    Distributed under the terms of the GNU GPL version 2. -#}

<div>

	<h1>{{ _('My Informations') }}</h1>
	<div id='index_no_staff'>
		<div id='table' name='{{ user_uid }}'>
		<br />

			{%- for field in form.visible_fields() -%}
				{%- set immutable = field.name in form.immutables -%}
					<div class='sub_content_line big_line'>
						<div class='sub_content_half_line'>
							<strong>{{ field.label_tag() }}</strong>{{ _('(fixed)') if immutable }}</div>
						<div class='sub_content_half_line align_right'>
							{%- if immutable -%}
								{{ field.value() }}
							{%- else -%}
								{%- if field.name == 'password' -%}
									<span><img id="generate_pwds" src="/media/images/16x16/generate.png" alt="'+ gettext("Generate passwords") +'"/></span> {{ field }}
									<span id='pwd_strenght' style='font-size:12px;'></span>
								{%- elif field.name == 'password_confirm'-%}
									<span id="check_pwds"></span> {{ field }}
								{%- else -%}
									{{ field }}
								{%- endif -%}

							{%- endif -%}

						</div>
					</div>
			{%- endfor -%}
		</div>
		<!--<div>
			<table>

			{%- for list in groups_lists -%}
			<tr>
				<td colspan="2">
					<h2><span class="{{ 'grayed_out' if list.groups == []  }}">{{ list.title }}</span></h2>
					<table class="item_members user_memberships">
						{%- if list.groups != [] -%}
							<thead>
							<tr>
								<th class="align_left" width="70%">{{ _('Description') }}</th>
								<th class="align_center" nowrap width="20%">{{ _('Name') }}</th>
								<th class="align_right" width="10%">{{ _('GID') }}</th>
							</tr>
							</thead>
							<tbody>
							{%- for group in list.groups|sort(attribute='name') -%}
									<tr>
										<td colspan="3">
										<table>
											<tr>
											<td class="align_left first" width="70%">
												<a href="/groups/view/{{ group.name }}">
													{{ group.description
													or ('<span class="grayed_out">{0}</span>').format(
														_('No description')) }}</a>
											</td>
											<td class="align_center" nowrap width="20%">
												<a href="/groups/view/{{ group.name }}">
													<strong>{{ group.name }}</strong></a>
											</td>
											<td class="align_right last" width="10%">
												<a href="/groups/view/{{ group.name }}">
													{{ group.gidNumber }}</a>
											</td>
											
										</table>
										</td>
									</tr>
							{%- endfor -%}
							</tbody>
							<tfoot></tfoot>
						{%- else -%}
							<tbody>
								<tr>
									<td colspan="3">
										<span class="grayed_out">
											{{ _('This user is not {0} of any group yet.').format(list.kind) }}
										</span>
									</td>
								</tr>
							</tbody>
						{%- endif -%}
					</table>
				</td>
			</tr>
				{#
					extensions_group_data='\n'.join(wmi_meth(group,
								templates=(
									'%s<br/>%s', '&nbsp;'),
								hostname=kwargs['wmi_hostname'])
							for wmi_meth in exts_wmi_group_meths)
				#}

			{%- endfor -%}
			</table>
		</div>-->
	</div>

</div>
<script type="text/javascript">
	$(document).ready(function() {
		init_instant_apply('users');

		// from main.js
		password_helpers($("#index_no_staff"))

	});
</script>
