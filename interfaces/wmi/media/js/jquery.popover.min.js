(function(a){var b={verticalOffset:10,horizontalOffset:10,title:!1,content:!1,url:!1,classes:"",position:"auto",fadeSpeed:160,trigger:"click",preventDefault:!0,stopChildrenPropagation:!0,hideOnHTMLClick:!0,animateChange:!0,autoReposition:!0,anchor:!1,closeEvent:null,openEvent:null},c=[],d={calc_position:function(b,c){var d=b.popover("getData"),e=d.options,f=e.anchor?a(e.anchor):b,g=d.popover,h=f.offset(),i,j;return c=="top"?(i=h.top-g.outerHeight(),j=h.left-g.outerWidth()/2+f.outerWidth()/2):c=="right"?(i=h.top+f.outerHeight()/2-g.outerHeight()/2,j=h.left+f.outerWidth()):c=="left"?(i=h.top+f.outerHeight()/2-g.outerHeight()/2,j=h.left-g.outerWidth()):(i=h.top+f.outerHeight(),j=h.left-g.outerWidth()/2+f.outerWidth()/2),x2=j+g.outerWidth(),y2=i+g.outerHeight(),ret={x1:j,x2:x2,y1:i,y2:y2},ret},pop_position_class:function(a,b){var c="popover-top popover-right popover-left",d="top-arrow",e="right-arrow bottom-arrow left-arrow";b=="top"?(c="popover-right popover-bottom popover-left",d="bottom-arrow",e="top-arrow right-arrow left-arrow"):b=="right"?(c="popover-yop popover-bottom popover-left",d="left-arrow",e="top-arrow right-arrow bottom-arrow"):b=="left"&&(c="popover-top popover-right popover-bottom",d="right-arrow",e="top-arrow bottom-arrow left-arrow"),a.removeClass(c).addClass("popover-"+b).find(".arrow").removeClass(e).addClass(d)}},e={init:function(d){return this.each(function(){var e=a.extend({},b,d),f=a(this),g=f.popover("getData");if(!g){var h=a('<div class="popover" />').addClass(e.classes).append('<div class="arrow" />').append('<div class="wrap"></div>').appendTo("body").hide();e.stopChildrenPropagation&&h.children().bind("click.popover",function(a){a.stopPropagation()}),f.bind("click.popover",function(a){e.preventDefault&&a.preventDefault(),a.stopPropagation()}),e.anchor&&!e.anchor instanceof jQuery&&(e.anchor=a(e.anchor));var g={target:f,popover:h,options:e};e.title&&a('<div class="title" />').html(e.title instanceof jQuery?e.title.html():e.title).appendTo(h.find(".wrap")),e.content&&a('<div class="content" />').html(e.content instanceof jQuery?e.content.html():e.content).appendTo(h.find(".wrap")),f.data("popover",g),c.push(f),e.url&&f.popover("ajax",e.url),f.popover("reposition"),f.popover("setTrigger",e.trigger);if(e.hideOnHTMLClick){var i="click.popover";"ontouchstart"in document.documentElement&&(i="touchstart.popover"),a("html").unbind(i).bind(i,function(b){a.isFunction(g.options.closeEventHtmlClick)?g.options.closeEventHtmlClick(g.popover):a("html").popover("fadeOutAll")})}if(e.autoReposition){var j=function(a){f.popover("reposition")};a(window).unbind("resize.popover").bind("resize.popover",j).unbind("scroll.popover").bind("scroll.popover",j)}}})},reposition:function(){return this.each(function(){var b=a(this),c=b.popover("getData");if(c){var e=c.popover,f=c.options,g=f.anchor?a(f.anchor):b,h=g.offset(),i=f.position;i!="top"&&i!="right"&&i!="left"&&i!="auto"&&(i="bottom");var j;if(i=="auto"){var k=["bottom","left","top","right"],l=a(window).scrollTop(),m=a(window).scrollLeft(),n=a(window).outerHeight(),o=a(window).outerWidth();a.each(k,function(a,c){j=d.calc_position(b,c);var e=j.x1-m,g=j.x2-m+f.horizontalOffset,h=j.y1-l,k=j.y2-l+f.verticalOffset;return e<0||g<0||h<0||k<0?!0:k>n?!0:g>o?!0:(i=c,!1)});if(i=="auto")return}j=d.calc_position(b,i);var p=j.top,q=j.left;d.pop_position_class(e,i);var r=0,s=0;i=="bottom"&&(r=f.verticalOffset),i=="top"&&(r=-f.verticalOffset),i=="right"&&(s=f.horizontalOffset),i=="left"&&(s=-f.horizontalOffset);var t={left:j.x1,top:j.y1,marginTop:r,marginLeft:s};c.initd&&f.animateChange?e.css(t):(c.initd=!0,e.css(t)),b.data("popover",c)}})},destroy:function(){return this.each(function(){var b=a(this),c=b.popover("getData");b.unbind(".popover"),a(window).unbind(".popover"),c.popover.remove(),b.removeData("popover")})},show:function(){return this.each(function(){var b=a(this),c=b.popover("getData");if(c){var d=c.popover;b.popover("reposition"),d.clearQueue().css({zIndex:950}).show()}a.isFunction(c.options.openEvent)&&c.options.openEvent(c.popover)})},hide:function(){return this.each(function(){var b=a(this),c=b.popover("getData");c&&c.popover.hide().css({zIndex:949}),a.isFunction(c.options.closeEvent)&&c.options.closeEvent(c.popover)})},fadeOut:function(b){return this.each(function(){var c=a(this),d=c.popover("getData");if(d){var e=d.popover,f=d.options;e.delay(100).css({zIndex:949}).fadeOut(b?b:f.fadeSpeed)}})},hideAll:function(){return a.each(c,function(a,b){var c=$this.popover("getData");if(c){var d=c.popover;d.hide()}})},fadeOutAll:function(b){return a.each(c,function(c,d){var e=a(this),f=e.popover("getData");if(f){var g=f.popover,h=f.options;g.css({zIndex:949}).fadeOut(b?b:h.fadeSpeed)}})},setTrigger:function(b){return this.each(function(){var c=a(this),d=c.popover("getData");if(d){var e=d.popover,f=d.options,g=f.anchor?a(f.anchor):c;b==="click"?(g.unbind("click").bind("click",function(a){a.preventDefault(),a.stopPropagation(),c.popover("show")}),e.unbind("click.popover").bind("click.popover",function(a){a.stopPropagation()})):(g.unbind("click"),e.unbind("click.popover")),b==="hover"?(g.add(e).bind("mousemove.popover",function(a){c.popover("show")}),g.add(e).bind("mouseleave.popover",function(a){c.popover("fadeOut")})):g.add(e).unbind("mousemove.popover").unbind("mouseleave.popover"),b==="focus"?(g.add(e).bind("focus.popover",function(a){c.popover("show")}),g.add(e).bind("blur.popover",function(a){c.popover("fadeOut")}),g.bind("click.popover",function(a){a.stopPropagation()})):g.add(e).unbind("focus.popover").unbind("blur.popover").unbind("click.popover")}})},title:function(b){return this.each(function(){var c=a(this),d=c.popover("getData");if(d){var e=d.popover.find(".title"),f=d.popover.find(".wrap");e.length===0&&(e=a('<div class="title" />').appendTo(f)),e.html(b)}})},content:function(b){return this.each(function(){var c=a(this),d=c.popover("getData");if(d){var e=d.popover.find(".content"),f=d.popover.find(".wrap");e.length===0&&(e=a('<div class="content" />').appendTo(f)),e.html(b)}})},ajax:function(b,c){return this.each(function(){var d=a(this),e=d.popover("getData");if(e){var f={url:b,success:function(b){var c=e.popover.find(".content"),d=e.popover.find(".wrap");c.length===0&&(c=a('<div class="content" />').appendTo(d)),c.html(b)}},g=a.extend({},f,c);a.ajax(g)}})},setOption:function(b,c){return this.each(function(){var d=a(this),e=d.popover("getData");e&&(e.options[b]=c,d.data("popover",e))})},getData:function(){var b=[];this.each(function(){var c=a(this),d=c.data("popover");d&&b.push(d)});if(b.length==0)return;return b.length==1&&(b=b[0]),b}};a.fn.popover=function(b){if(e[b])return e[b].apply(this,Array.prototype.slice.call(arguments,1));if(typeof b=="object"||!b)return e.init.apply(this,arguments);a.error("Method "+b+" does not exist on jQuery.popover")}})(jQuery);