function head_over_to(a){push_active=!1,loading_animation(500),document.location=a}function loading_animation_func(){$("body").prepend('<div id="loading_information"><span class="push_reconnection_notification">'+gettext("Collecting data, please wait&hellip;")+"</span></div>"),$("#loading_information").fadeIn("slow")}function remove_loading_animation(){$("#loading_information").fadeOut("slow",function(){$("body").remove("#loading_information")})}function loading_animation(a){typeof a=="undefined"?loading_animation_func():setTimeout(loading_animation_func,a)}function strargs(a,b){null==b||"undefined"==typeof b?b=[]:b.constructor!=Array&&(b=[b]);var c="";for(;;){var d=a.indexOf("%"),e;if(d==-1){c+=a;break}c+=a.substr(0,d);if(a.substr(d,2)=="%%")c+="%",a=a.substr(d+2);else if(e=a.substr(d).match(/^%(\d+)/)){var f=parseInt(e[1]),g=e[1].length;f>0&&b[f-1]!=null&&typeof b[f-1]!="undefined"&&(c+=b[f-1]),a=a.substr(d+1+g)}else c+="%",a=a.substr(d+1)}return c}function zeroFill(a,b){return b-=a.toString().length,b>0?(new Array(b+(/\./.test(a)?2:1))).join("0")+a:a}function isInt(a){var b=parseInt(a);return isNaN(b)?!1:a==b&&a.toString()==b.toString()}function dialog(a,b,c,d,e,f){c||(c=!1),e||(e=!1),f||(f=""),(DEBUG||DEBUG_UTILS)&&console.log("new dialog : "),(DEBUG||DEBUG_UTILS)&&console.log(" - title : "+a),(DEBUG||DEBUG_UTILS)&&console.log(" - yes_no : "+c),(DEBUG||DEBUG_UTILS)&&console.log(" - content_has_to_be_loaded : "+e),this.title=a,this.content=b,this.yes_no=c,this.content_has_to_be_loaded=e,this.url_to_be_loaded=f,_DIALOG=this,this.show=function(){$("#dialog").show(),$("#dialog-content").show(),data='<div id="dialog-head">',data+='\t<div id="dialog-title">'+this.title+"</div>",data+='\t<div id="dialog-close"><img src="/media/images/16x16/croix.png"/></div>',data+="</div>",data+='<div id="dialog-text">',data+="\t"+this.content,data+="</div>",data+='<div id="dialog-buttons">',this.yes_no==1&&(data+='\t<div class="dialog-button" id="dialog-action-button">',data+=gettext("Confirm"),data+="\t</div>"),data+='\t<div class="dialog-button" id="dialog-close-button">',this.yes_no==1?data+=gettext("Cancel"):data+=gettext("Close"),data+="\t</div>",data+="</div>",$("#dialog-content").html(data),this.init_events()},this.hide=function(){$("body").unbind("keyup"),$("#dialog").hide(),$("#dialog-content").hide()},this.init_events=function(){this.content_has_to_be_loaded&&$.getJSON(this.url_to_be_loaded,function(a){$("#dialog-text").html($.base64Decode(a.content))}),$("#dialog-close").click(function(){_DIALOG.hide()}),$("#dialog-close-button").click(function(){_DIALOG.hide()}),$("body").keyup(function(){event.keyCode==27&&($("#dialog").is(":hidden")||_DIALOG.hide()),_DIALOG.yes_no==1?event.keyCode==13&&($("#dialog").is(":hidden")||(d.call(),_DIALOG.hide())):event.keyCode==13&&($("#dialog").is(":hidden")||$("#dialog").is(":hidden")||_DIALOG.hide())}),this.yes_no==1&&$("#dialog-action-button").click(function(){d.call(),_DIALOG.hide()})}}function decrement_master_notification_timeout(){master_notification_timeout>0?master_notification_timeout-=1e3:(notification_displayed&&$("#notification").slideUp("slow",function(){notification_displayed=!1}),clearInterval(notification_timeout_interval_func))}function show_message_through_notification(a,b,c){function d(a){$("#number-"+a).slideUp("slow"),$("#number-"+a+"-wrapper").fadeOut("slow",function(){$(this).remove(),$("#notification").html()==""&&(master_notification_timeout=0)})}notification_counter+=1;if(typeof b=="undefined"||b=="")b=default_notification_timeout;typeof c=="undefined"&&(c=""),new_msg="<div class='notification-text ' id='number-"+notification_counter+"-wrapper'>"+"<div class='notification-text "+c+"' id='number-"+notification_counter+"' "+(notification_displayed?"style='display: none;'":"")+">"+a+"</div></div>",notification_displayed?($("#notification").append(new_msg),$("#number-"+notification_counter).slideDown("slow"),$("#number-"+notification_counter+"-wrapper").fadeIn("slow"),b>master_notification_timeout&&(master_notification_timeout=b)):($("#notification").append(new_msg).slideDown("slow",function(){notification_displayed=!0}),master_notification_timeout=b,clearInterval(notification_timeout_interval_func),notification_timeout_interval_func=setInterval(decrement_master_notification_timeout,1e3)),notification_timer_funcs["number-"+notification_counter]=setTimeout(d,b,notification_counter)}function remove_notification(a){objekt=$("."+a),clearTimeout(notification_timer_funcs[objekt.attr("id")]),objekt.slideUp("slow",function(){$(this).remove()})}function init_instant_apply(a){interval=1e3,form_div=$("#table"),form_div.find("input:text").keyup(function(){clearTimeout(instant_apply_timeout_textbox),page="/"+a+"/mod/"+form_div.attr("name")+"/"+$(this).attr("name")+"/"+$(this).val(),instant_apply_timeout_textbox=setTimeout(function(){$.get(page)},interval)}),form_div.find("input:checkbox").click(function(){checked=this.checked,this.checked==1?checked="True":checked="",page="/"+a+"/mod/"+form_div.attr("name")+"/"+$(this).attr("name")+"/"+checked,$.get(page)}),form_div.find("input:password").keyup(function(){var a=!1;form_div.find("input:password").each(function(){$(this).val()==""&&(a=!0)}),a||(clearTimeout(instant_apply_timeout_pwd),instant_apply_timeout_pwd=setTimeout(function(){var a=!0,b=!0;form_div.find("input:password").each(function(){a?pwd=$(this).val():pwd!=$(this).val()&&(b=!1),a=!1}),b?(url="/users/mod/"+form_div.attr("name")+"/password/"+pwd,$.get(url)):show_message_through_notification("Incorrect passwords")},interval))});var b;form_div.find("select").change(function(){clearTimeout(b),page="/"+a+"/mod/"+form_div.attr("name")+"/"+$(this).attr("name")+"/"+$.URLEncode($(this).val()),b=setTimeout(function(){$.get(page)},interval)});var c={no_membership:0,guest:1,member:2,resp:3};$(".instant_apply_click").click(function(){div=$("#sub_content").find("#"+$(this).attr("id")).filter(".click_item"),div.find(".item_hidden_input").addClass("item_currently_selected"),a=="users"?url="/users/mod/"+$("#sub_content").attr("value")+"/groups/"+$(this).attr("id")+"/"+c[$(this).attr("value")]:url="/groups/mod/"+$("#sub_content").attr("value")+"/users/"+$(this).attr("id")+"/"+c[$(this).attr("value")],$.get(url)})}function get_user_groups_list(a){return groups=[],$(a).each(function(){gid=$(this).find(".item_hidden_input").attr("value"),gid!=""&&groups.push(gid)}),groups.join(",")}function init_sub_list_height(){nb_list=$(".sub_content_list").length,nb_one_ligne=$(".one_line").length,nb_big_ligne=$(".big_line").length,nb_title=$(".sub_content_title").length,nb_items_total=0,percentage=[],nb_items=[],cpt=0,$(".sub_content_list").each(function(){nb_items_in_list=$(this).find(".click_item").length,nb_items_in_list>50&&(nb_items_in_list=50),nb_items_in_list<5&&(nb_items_in_list=5),nb_items[cpt]=nb_items_in_list,nb_items_total+=nb_items_in_list,cpt+=1}),$.each(nb_items,function(a,b){percentage[a]=b/nb_items_total}),height=$("#sub_content").innerHeight()-nb_one_ligne*$(".one_line").height()-nb_title*$(".sub_content_title").outerHeight(!0)-nb_big_ligne*$(".sub_content_line").outerHeight(!0)-$("#sub_content_header").outerHeight(!0)-20,cpt=0,$(".sub_content_list").each(function(){_height=height*percentage[cpt],$(this).height(_height),cpt+=1})}function no_accent(a){var b=a.toLowerCase();return b=b.replace(new RegExp("[àáâãäå]","g"),"a"),b=b.replace(new RegExp("æ","g"),"ae"),b=b.replace(new RegExp("ç","g"),"c"),b=b.replace(new RegExp("[èéêë]","g"),"e"),b=b.replace(new RegExp("[ìíîï]","g"),"i"),b=b.replace(new RegExp("ñ","g"),"n"),b=b.replace(new RegExp("[òóôõö]","g"),"o"),b=b.replace(new RegExp("œ","g"),"oe"),b=b.replace(new RegExp("[ùúûü]","g"),"u"),b=b.replace(new RegExp("[ýÿ]","g"),"y"),b}$.extend({URLEncode:function(a){var b="",c=0;a=a.toString();var d=/(^[a-zA-Z0-9_.]*)/;while(c<a.length){var e=d.exec(a.substr(c));if(e!=null&&e.length>1&&e[1]!="")b+=e[1],c+=e[1].length;else{if(a[c]==" ")b+="+";else{var f=a.charCodeAt(c),g=f.toString(16);b+="%"+(g.length<2?"0":"")+g.toUpperCase()}c++}}return b},URLDecode:function(a){var c=a,d,e,f=/(%[^%]{2})/;while((m=f.exec(c))!=null&&m.length>1&&m[1]!="")b=parseInt(m[1].substr(1),16),e=String.fromCharCode(b),c=c.replace(m[1],e);return c}});var notification_timeout_interval_func,master_notification_timeout=0,default_notification_timeout=7e3,notification_displayed=!1,notification_timer_funcs=new Array,notification_counter=0;