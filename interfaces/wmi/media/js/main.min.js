function body_wait(a){typeof a=="undefined"&&(a=!1),body.hasClass("waiting")||body.addClass("waiting"),a&&(body_stay_waiting=!0)}function body_unwait(a){typeof a=="undefined"&&(a=!1),body.hasClass("waiting")&&(body_stay_waiting?a&&setTimeout(function(){body_stay_waiting=!1,body.removeClass("waiting")},500):body.removeClass("waiting"))}function setup_ajax_togglers(a){if(typeof a=="undefined"||a=="")a="html";$(a).find(".ajax-slider-toggle-master").each(function(){$(this).click(function(){$("#"+$(this).attr("id")+".ajax-slider-toggle-slave").slideToggle()})})}function setup_ajax_initially_hidden(a){if(typeof a=="undefined"||a=="")a="html";$(a).find(".ajax-initially-hidden").hide()}function refresh_div(a,b,c){new_html=$(b),typeof c=="undefined"||c?a.find("._refresh").each(function(){$(this).html(new_html.find("#"+$(this).attr("id")).html())}):a.find("._refresh").each(function(){old_data=$(this).html(),new_data=new_html.find("#"+$(this).attr("id")).html(),new_data!=old_data&&$(this).html(new_data).animate({backgroundColor:$.Color("olive").transition("transparent",.75)},250,function(){$(this).animate({backgroundColor:$.Color("transparent").transition("transparent",0)},1500)})}),a.css("opacity",1)}function reload_div(a,b,c){div=$(a),c===undefined?div.stop(!1,!1).fadeOut("fast",function(){$(this).html(b).stop(!1,!0).fadeIn("fast")}):div.stop(!0,!1).html(b),div.css("opacity",1)}function lock_sub_content(a){typeof a=="undefined"&&(a=""),$("#sub_content").addClass("locked"),$("#sub_content").attr("value",a)}function unlock_sub_content(){$("#sub_content").removeClass("locked"),$("#sub_content").attr("value","");try{$("#search_box").focus()}catch(a){}}function is_sub_content_locked(){return $("#sub_content").hasClass("locked")}function clear_sub_content_with_id(a){$("#sub_content").attr("value")==a&&(reload_div("#sub_content",""),unlock_sub_content())}function password_helpers(a){a.find("input:password").keyup(function(){var b=!1;a.find("input:password").each(function(){$(this).val()==""&&(b=!0)});if(!b){var c=!0,d=!0;a.find("input:password").each(function(){c?pwd=$(this).val():pwd!=$(this).val()&&(d=!1),c=!1}),d?(a.find("#check_pwds").html('<img src="/media/images/16x16/check_ok.png"/>'),$.get("/users/check_pwd_strenght/"+pwd,function(b){b!=pwd?a.find("#pwd_strenght").html("<div class='check_pwd_recap' style='color:red;'>"+b+"</div>"):a.find("#pwd_strenght").html("<div class='check_pwd_recap' style='color:green;'> Mot de passe sécurisé </div>")}),passwords_match=!0):(a.find("#check_pwds").html('<img src="/media/images/16x16/check_bad.png"/>'),passwords_match=!1,a.find("#pwd_strenght").html(""))}else a.find("#check_pwds").html(""),a.find("#pwd_strenght").html("")}),$("#generate_pwds").click(function(){var b=null;$.get("/users/generate_pwd/",function(c){b=c,gen_pwd_dialog=new dialog(gettext("Random password generator"),strargs(gettext('<br />The generated password is &ldquo;&nbsp;<strong class="bigger">%1</strong>&nbsp;&rdquo;. If you want to use it, just hit the <code>Confirm</code> button, and remember it.'),[b]),!0,function(){a.find("input:password").val(b).trigger("keyup")}),gen_pwd_dialog.show()})})}function generate_machine(){$.each($(".licorn_machine"),function(a,b){mid=$(this).attr("id"),$.get("/energy/generate_machine_html/"+mid,function(a){$(b).before($(a))})})}var DEBUG=!1,DEBUG_USER=!1,DEBUG_GROUP=!1,DEBUG_UTILS=!1,instant_apply_timeout_textbox,instant_apply_timeout_pwd,body=null,body_stay_waiting=!1;$(document).ready(function(){setup_ajax_initially_hidden(),setup_ajax_togglers(),body=$("body");try{}catch(a){}$.ajaxSetup({timeout:0}),push_setup()}),$(document).keyup(function(a){if(a.keyCode==27){var b=$("#search_box");if(b!=[]&&b.is(":focus")&&b.val()!="")b.val(""),b.keyup();else{unlock_sub_content(),$("#sub_content").fadeOut(),$("#sub_content").html(),clearTimeout(instant_apply_timeout_textbox),clearTimeout(instant_apply_timeout_pwd);try{unselect_row()}catch(c){}}}});