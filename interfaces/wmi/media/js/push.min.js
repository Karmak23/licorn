function push_setup(a){a===undefined?current_push_url?a=current_push_url:a=("/setup/"+document.location.toString().split("/").slice(3).join("/")).replace("//","/"):a="/setup"+a,current_push_url=a,$.get(current_push_url).success(push_setup_success).error(push_error)}function push_setup_success(){push_active&&push_stream_error&&(push_stream_error=!1,show_message_through_notification(gettext("Push connection back online, rock'n roll!"),5e3)),push_get()}function push_get(){$.get("/push").success(push_evaluate).error(push_error)}function push_error(){push_active&&(push_stream_error?show_message_through_notification(gettext("Push connection lost. Retrying in 5 seconds."),5e3,"push_reconnection_notification"):(setTimeout(function(){show_message_through_notification(gettext("Push connection lost. Retrying in 3 seconds."),3e3,"push_reconnection_notification")},2e3),push_stream_error=!0)),setTimeout(push_setup,5e3)}function push_evaluate(data){calls_list=data.data;for(i=0,l=calls_list.length;i<l;i++){curobj=calls_list[i];try{push_active&&eval(curobj.method+"("+curobj.arguments.join(",")+")")}catch(err){try{console.log(err)}catch(err){}}}push_get()}var push_active=!0,push_stream_error=!1,push_setup_done=!1,current_push_url=null;