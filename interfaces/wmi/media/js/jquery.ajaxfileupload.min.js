(function(a){var b={params:{},action:"",onStart:function(){},onComplete:function(a){},onCancel:function(){}},c=function(a,c){var d,e=a.contentWindow.document.body.innerHTML;try{d=JSON.parse(e)}catch(f){d=e}c.siblings().remove(),c.unwrap(),b.onComplete.apply(c,[d,b.params])},d=function(d){var e="ajaxUploader-iframe-"+Math.round((new Date).getTime()/1e3);a("body").after('<iframe width="0" height="0" style="display:none;" name="'+e+'" id="'+e+'"/>'),a("#"+e).load(function(){c(this,d)}),d.wrap(function(){return'<form action="'+b.action+'" method="POST" enctype="multipart/form-data" target="'+e+'" />'}).after(function(){var a,c="";for(a in b.params)c+='<input type="hidden" name="'+a+'" value="'+b.params[a]+'" />';return c})};a.fn.ajaxfileupload=function(c){return c&&a.extend(b,c),this.each(function(){var c=a(this);if(c.data("ajaxUploader-setup")===!0)return;c.change(function(){if(c.val()=="")return b.doCancel.apply(c,[b.params]);d(c);var a=b.onStart.apply(c);a!==!1&&c.parent("form").submit()}),c.data("ajaxUploader-setup",!0)})}})(jQuery)(function(a){a.fn.ajaxfileupload=function(b){var c={params:{},action:"",onStart:function(){},onComplete:function(a){},onCancel:function(){},valid_extensions:["gif","png","jpg","jpeg"],submit_button:null},d=!1;return b&&a.extend(c,b),this.each(function(){var b=a(this);if(b.data("ajaxUploader-setup")===!0)return;b.change(function(){d=!1,c.submit_button==null&&e()}),c.submit_button!=null&&c.submit_button.click(function(){d||e()});var e=function(){if(b.val()=="")return c.onCancel.apply(b,[c.params]);var e=b.val().split(".").pop().toLowerCase();if(a.inArray(e,c.valid_extensions)==-1)c.onComplete.apply(b,[{status:!1,message:"The select file type is invalid. File must be "+c.valid_extensions.join(", ")+"."},c.params]);else{d=!0,g(b);var f=c.onStart.apply(b);f!==!1&&b.parent("form").submit()}};b.data("ajaxUploader-setup",!0);var f=function(a,b){var e,f=a.contentWindow.document.body.innerHTML;try{e=JSON.parse(f)}catch(g){e=f}b.siblings().remove(),b.unwrap(),d=!1,c.onComplete.apply(b,[e,c.params])},g=function(b){var d="ajaxUploader-iframe-"+Math.round((new Date).getTime()/1e3);a("body").after('<iframe width="0" height="0" style="display:none;" name="'+d+'" id="'+d+'"/>'),a("#"+d).load(function(){f(this,b)}),b.wrap(function(){return'<form action="'+c.action+'" method="POST" enctype="multipart/form-data" target="'+d+'" />'}).after(function(){var a,b="";for(a in c.params)b+='<input type="hidden" name="'+a+'" value="'+c.params[a]+'" />';return b})}})}})(jQuery);